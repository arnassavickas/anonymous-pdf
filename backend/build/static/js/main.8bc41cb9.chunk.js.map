{"version":3,"sources":["components/OnDragEnterDisplay.js","components/Dropzone.js","App.js","index.js"],"names":["OnDragEnterDisplay","isOver","display","Fade","in","id","style","Typography","variant","fontSize","Dropzone","checkAndCreate","children","setIsOver","fileDrop","e","a","preventDefault","files","dataTransfer","onDragOver","onDragEnter","onDragLeave","onDrop","className","App","useState","enqueueSnackbar","useSnackbar","header","setHeader","footer","setFooter","useEffect","fetch","headerFile","arrayBuffer","headerBuffer","footerFile","footerBuffer","create","file","uploadBuffer","PDFDocument","load","pdfDoc","embedPdf","headerEmbed","headerDims","size","footerEmbed","footerDims","getPages","forEach","page","scaledFooter","scale","getSize","width","scaledHeader","drawPage","x","y","height","save","pdfFile","dateRegex","invoiceNameRegex","fileName","test","name","match","download","autoHideDuration","onButtonUplaod","event","target","i","length","type","bool","src","alt","accept","onChange","multiple","ReactDOM","render","StrictMode","anchorOrigin","vertical","horizontal","hideIconVariant","maxSnack","document","getElementById"],"mappings":"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","file":"static/js/main.8bc41cb9.chunk.js","sourcesContent":["import React from 'react';\nimport { Typography, Fade } from '@material-ui/core';\nimport CheckIcon from '@material-ui/icons/Check';\n\nconst OnDragEnterDisplay = ({ isOver }) => {\n  const display = isOver ? { display: 'flex' } : { display: 'none' };\n  return (\n    <Fade in={isOver}>\n      <div id='on-hover' style={display}>\n        <Typography variant='h2'>galite paleisti</Typography>\n        <CheckIcon style={{ fontSize: 100 }} />\n      </div>\n    </Fade>\n  );\n};\n\nexport default OnDragEnterDisplay;\n","import React from 'react';\nimport OnDragEnterDisplay from './OnDragEnterDisplay';\n\nconst Dropzone = ({ checkAndCreate, children, isOver, setIsOver }) => {\n  const dragOver = (e) => {\n    e.preventDefault();\n  };\n\n  const dragEnter = (e) => {\n    e.preventDefault();\n    if (!isOver) {\n      setIsOver(true);\n    }\n  };\n\n  const dragLeave = (e) => {\n    e.preventDefault();\n    if (isOver) {\n      setIsOver(false);\n    }\n  };\n\n  const fileDrop = async (e) => {\n    e.preventDefault();\n    const files = e.dataTransfer.files;\n    await checkAndCreate(files);\n    setIsOver(false);\n  };\n\n  return (\n    <div\n      onDragOver={dragOver}\n      onDragEnter={dragEnter}\n      onDragLeave={dragLeave}\n      onDrop={fileDrop}\n      className='dropzone'\n    >\n      {children}\n      <OnDragEnterDisplay isOver={isOver} />\n    </div>\n  );\n};\n\nexport default Dropzone;\n","import React, { useState, useEffect } from 'react';\nimport { PDFDocument } from 'pdf-lib';\nimport download from 'downloadjs';\nimport { Typography, Fade } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\nimport Dropzone from './components/Dropzone';\n\nconst App = () => {\n  const [isOver, setIsOver] = useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n  const [header, setHeader] = useState(null);\n  const [footer, setFooter] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      const headerFile = await fetch('/pdfs/header.pdf');\n      const headerBuffer = await headerFile.arrayBuffer();\n      setHeader(headerBuffer);\n      const footerFile = await fetch('/pdfs/footer.pdf');\n      const footerBuffer = await footerFile.arrayBuffer();\n      setFooter(footerBuffer);\n    })();\n  }, []);\n\n  const create = async (file) => {\n    const uploadBuffer = await file.arrayBuffer();\n    const pdfDoc = await PDFDocument.load(uploadBuffer);\n    const [headerEmbed] = await pdfDoc.embedPdf(header);\n    const headerDims = headerEmbed.size();\n    const [footerEmbed] = await pdfDoc.embedPdf(footer);\n    const footerDims = footerEmbed.size();\n\n    const pages = pdfDoc.getPages();\n    pages.forEach((page) => {\n      const scaledFooter = footerEmbed.scale(\n        page.getSize().width / footerDims.width\n      );\n      const scaledHeader = headerEmbed.scale(\n        page.getSize().width / headerDims.width\n      );\n\n      page.drawPage(headerEmbed, {\n        ...scaledHeader,\n        x: 0,\n        y: page.getSize().height - scaledHeader.height - 17,\n      });\n      page.drawPage(footerEmbed, {\n        ...scaledFooter,\n        x: 0,\n        y: 5,\n      });\n    });\n    const pdfFile = await pdfDoc.save();\n    const dateRegex = /.{10}/;\n    const invoiceNameRegex = /AIR\\d{4,5}/;\n    const standardInvoiceRegex = /Pardavimai - PVM sf/;\n    let fileName;\n    if (standardInvoiceRegex.test(file.name)) {\n      fileName = `${file.name.match(invoiceNameRegex)} ${file.name.match(\n        dateRegex\n      )}.pdf`;\n    } else {\n      fileName = file.name;\n    }\n\n    download(pdfFile, `${fileName}`, 'application/pdf');\n    enqueueSnackbar(`\"${fileName}\" parsiųsta`, {\n      variant: 'success',\n      autoHideDuration: 6000,\n    });\n  };\n\n  const onButtonUplaod = async (event) => {\n    await checkAndCreate(event.target.files);\n  };\n\n  const checkAndCreate = async (files) => {\n    for (let i = 0; i < files.length; i++) {\n      if (files[i].type !== 'application/pdf') {\n        enqueueSnackbar(`failas \"${files[i].name}\" nėra PDF`, {\n          variant: 'error',\n          autoHideDuration: 6000,\n        });\n      } else {\n        await create(files[i]);\n      }\n    }\n  };\n\n  const display = isOver ? { display: 'none' } : { display: 'flex' };\n\n  return (\n    <div>\n      <Dropzone\n        checkAndCreate={checkAndCreate}\n        isOver={isOver}\n        setIsOver={(bool) => setIsOver(bool)}\n      >\n        <Fade in={!isOver}>\n          <div className='content' style={display}>\n            <img\n              className='logo'\n              src='/air_idea_logo.png'\n              alt='Air Idea Logo'\n            />\n            <Typography className='pdf' variant='h2'>\n              PDF\n            </Typography>\n            <input\n              type='file'\n              id='file-selector'\n              accept='application/pdf'\n              onChange={onButtonUplaod}\n              className='custom-file-input'\n              multiple\n            />\n            <Typography variant='body1'>Arba nutempkite jį čia</Typography>\n          </div>\n        </Fade>\n      </Dropzone>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SnackbarProvider } from 'notistack';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <SnackbarProvider\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      hideIconVariant\n      maxSnack={5}\n    >\n      <App />\n    </SnackbarProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}